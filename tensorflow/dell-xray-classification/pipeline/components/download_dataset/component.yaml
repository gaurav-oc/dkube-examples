name: download_dataset
description: |
    Viewer download dkube dataset
metadata:
  annotations: {platform: 'Dkube'}
  labels: {stage: 'download_dataset',  logger: 'dkubepl', wfid: '{{workflow.uid}}', runid: '{{pod.name}}'}
inputs:
  - {name: url,      type: String,   optional: false,
    description: 'Required. Dkube access URL.'}
  - {name: token,      type: String,   optional: false,
    description: 'Required. Dkube authentication token.'}
  - {name: user,      type: String,   optional: false,
    description: 'Required. Dkube Logged in User name.'}
  - {name: wsname,      type: String,   optional: false,
    description: 'Required. Dkube workspace name.'}
  - {name: dsname,      type: String,   optional: false,
    description: 'Required. Dkube dataset name.'}
implementation:
  container:
    image: docker.io/ocdr/chexnet:1.4.1
    command: ['sudo','-E','python3', 'launch_download_job.py']
    args: [
      --access_url, {inputValue: url},
      --auth_token, {inputValue: token},
      --user, {inputValue: user},
      --ws_name, {inputValue: wsname},
      --ds_name, {inputValue: dsname}
    ]
